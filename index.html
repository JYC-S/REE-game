<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What Rare Earth Elements (REE) are you ?</title>
    <style>
        /* === VARIABLES CSS === */
        :root {
            --couleur-primaire: #01204e;
            --couleur-secondaire: #026a8d;
            --couleur-accent: #71aca2;
            --couleur-succes: #71aca2;
            --couleur-texte: #2d3436;
            --couleur-background: #f4dcac;
            --couleur-carte: #ffffff;
            --ombre-carte: 0 10px 30px rgba(102, 126, 234, 0.1);
            --border-radius: 15px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* === STYLES DE BASE === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--couleur-primaire), var(--couleur-secondaire));
            min-height: 100vh;
            color: var(--couleur-texte);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* === PAGE D'ACCUEIL === */
        .hero {
            text-align: center;
            padding: 40px 0;
            color: white;
        }

        .titre-principal {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
        }

        .sous-titre {
            font-size: 1.2em;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .carte-accueil {
            background: var(--couleur-carte);
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--ombre-carte);
            text-align: center;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        .icone-quiz {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        .types-personnalite {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .type-preview {
            padding: 15px;
            border-radius: var(--border-radius);
            border: 2px solid transparent;
            transition: var(--transition);
            cursor: pointer;
        }

        .type-preview:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .type-preview.cerium { 
            background: linear-gradient(135deg, #f96628, #fda968);
            color: white;
        }

        .type-preview.dysprosium { 
            background: linear-gradient(135deg, #71aca2, #038694);
            color: white;
        }

        .type-preview.praseodyme { 
            background: linear-gradient(135deg, #fda968, #f4dcac);
            color: white;
        }

        .type-preview.lanthane { 
            background: linear-gradient(135deg, #f96628, #f43319);
            color: white;
        }

        .type-preview.gadolinium { 
            background: linear-gradient(135deg, #8bc34a, #a4d66b);
            color: white;
        }

        .type-preview.neodyme { 
            background: linear-gradient(135deg, #2196f3, #4dabf5);
            color: white;
        }

        .type-preview.tellure { 
            background: linear-gradient(135deg, #ff5722, #ff7043);
            color: white;
        }

        .emoji {
            font-size: 1.5em;
            display: block;
            margin-bottom: 5px;
        }

        .character-preview-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
            display: block;
            margin: 0 auto 5px auto;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .type-preview:hover .character-preview-img {
            border-color: rgba(255, 255, 255, 0.8);
            transform: scale(1.05);
        }

        /* === BOUTONS === */
        .btn-commencer, .btn-suivant, .btn-precedent, .btn-resultat, .btn-recommencer, .btn-partager {
            background: linear-gradient(135deg, var(--couleur-accent), var(--couleur-primaire));
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
        }

        .btn-commencer:hover, .btn-suivant:hover, .btn-precedent:hover, .btn-resultat:hover,
        .btn-recommencer:hover, .btn-partager:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.6);
        }

        .btn-precedent {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            margin-right: 15px;
        }

        /* === STYLE SPÉCIFIQUE POUR LE BOUTON COMMENCER === */
        .btn-commencer {
            background: linear-gradient(135deg, #3b82f6, #1e40af) !important;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4) !important;
        }

        .btn-commencer:hover {
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6) !important;
        }

        /* === QUIZ === */
        .quiz-section {
            display: none;
        }

        .quiz-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            border-radius: 50px;
            height: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            background: linear-gradient(90deg, var(--couleur-accent), #ffffff);
            height: 100%;
            border-radius: 50px;
            transition: var(--transition);
            width: 33.33%;
        }

        .progress-text {
            opacity: 0.9;
            font-size: 0.9em;
        }

        .question-card {
            background: var(--couleur-carte);
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--ombre-carte);
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .question-card.active {
            display: block;
        }

        .question-titre {
            font-size: 1.5em;
            margin-bottom: 30px;
            text-align: center;
            color: var(--couleur-primaire);
        }

        .choix-container {
            margin-bottom: 30px;
        }

        .choix {
            margin-bottom: 15px;
        }

        .choix input[type="radio"] {
            display: none;
        }

        .choix label {
            display: block;
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .choix label:hover {
            background: #e3f2fd;
            border-color: var(--couleur-primaire);
            transform: translateX(5px);
        }

        .choix input[type="radio"]:checked + label {
            background: linear-gradient(135deg, var(--couleur-primaire), var(--couleur-accent));
            color: white;
            border-color: var(--couleur-primaire);
            transform: scale(1.02);
        }

        .navigation-buttons {
            text-align: center;
            margin-top: 30px;
        }

        /* === IMAGES QUESTIONS === */
        .question-image {
            text-align: center;
            margin: 20px 0;
        }

        .question-image img {
            max-width: 60%;
            height: auto;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: var(--transition);
        }

        .question-image img:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        /* === RÉSULTAT === */
        .resultat-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.5s ease-out;
            overflow-y: auto;
            padding: 20px;
        }

        .carte-resultat {
            background: var(--couleur-carte);
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            margin: auto;
            text-align: center;
            animation: zoomIn 0.5s ease-out;
            overflow-y: auto;
            box-sizing: border-box;
        }

        .resultat-contenu h3 {
            font-size: 2em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--couleur-primaire), var(--couleur-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .actions-resultat {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* === FOOTER === */
        footer {
            text-align: center;
            padding: 30px 0;
            color: rgba(255,255,255,0.8);
        }

        /* === ANIMATIONS === */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* === RESPONSIVE === */
        @media (max-width: 768px) {
            .titre-principal {
                font-size: 2em;
            }
            
            .carte-accueil, .question-card, .carte-resultat {
                padding: 20px;
                margin: 10px;
            }
            
            .types-personnalite {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .actions-resultat {
                flex-direction: column;
            }
            
            .btn-commencer, .btn-suivant, .btn-precedent, .btn-resultat,
            .btn-recommencer, .btn-partager {
                padding: 12px 25px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- PAGE D'ACCUEIL -->
        <section id="accueil" class="accueil-section">
            <header class="hero">
                <h1 class="titre-principal">✨ What Rare Earth Element (REE) are you? ✨</h1>
                <p class="sous-titre">Discover your rare earth element personality by answering a few simple questions!</p>
            </header>
            
            <div class="carte-accueil">
                <div class="icone-quiz"></div>
                <h2>Ready to discover your inner element?</h2>
                <p>This scientific quiz will help you find out which rare earth element matches your personality among:</p>
                
                <div class="types-personnalite">
                    <div class="type-preview cerium">
                        <img src="Ce.jpg" alt="Cerium" class="character-preview-img">
                        <span>Cerium</span>
                    </div>
                    <div class="type-preview dysprosium">
                        <img src="Dy.jpg" alt="Dysprosium" class="character-preview-img">
                        <span>Dysprosium</span>
                    </div>
                    <div class="type-preview praseodyme">
                        <img src="Pr.jpg" alt="Praseodymium" class="character-preview-img">
                        <span>Praseodymium</span>
                    </div>
                    <div class="type-preview lanthane">
                        <img src="La.jpg" alt="Lanthanum" class="character-preview-img">
                        <span>Lanthanum</span>
                    </div>
                    <div class="type-preview gadolinium">
                        <img src="Ga.jpg" alt="Gadolinium" class="character-preview-img">
                        <span>Gadolinium</span>
                    </div>
                    <div class="type-preview neodyme">
                        <img src="Ne.jpg" alt="Neodymium" class="character-preview-img">
                        <span>Neodymium</span>
                    </div>
                    <div class="type-preview tellure">
                        <img src="Te.jpg" alt="Tellurium" class="character-preview-img">
                        <span>Tellurium</span>
                    </div>
                </div>
                
                <button class="btn-commencer" onclick="commencerQuiz()">Start the quiz</button>
            </div>
            
            <footer>
                <p>💡 No right or wrong answers - just be yourself!</p>
            </footer>
        </section>

        <!-- SECTION QUIZ -->
        <section id="quiz" class="quiz-section">
            <header class="quiz-header">
                <h1>🧠 What Rare Earth Element (REE) are you ?</h1>
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                <span class="progress-text">Question <span id="question-actuelle">1</span></span>
            </header>

            <form id="quiz-form">
                <!-- Question 1 -->
                <div class="question-card active" data-question="1">
                    <h2 class="question-titre">Here you are, one Rare Earth Element (REE) out of many in e-waste. What a mess.... To escape from being killed because of your old age, you have to team up with your other REE friends. What is your first action?</h2>

                    <div class="question-image">
                        <img src="Q1 décharge.jpg" alt="E-waste with scattered electronic devices" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="q1c1" name="question1" value="CERIUM:1,PRASEODYME:1,NEODYME:1" required>
                            <label for="q1c1">You like to stay on top of the situation, and you take the lead.</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="q1c2" name="question1" value="LANTHANE:1,TELLURE:1,GADOLINIUM:1" required>
                            <label for="q1c2">You've never been good at talking in public but you keep your beautiful smile on</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="q1c3" name="question1" value="CERIUM:1,PRASEODYME:1" required>
                            <label for="q1c3">You have something so smart to say that nobody understands and starts to sleep</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="q1c4" name="question1" value="DYSPROSIUM:1,LANTHANE:1" required>
                            <label for="q1c4">You're just happy to be part of the team</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Next →
                        </button>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-card" data-question="2">
                    <h2 class="question-titre">You came up with a plan to escape from this e-waste. What is it ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="q2c1" name="question2" value="CERIUM:1,SPACESHIP_PATH" required>
                            <label for="q2c1">While everybody was running around like headless chickens, you've managed to build a space ship and fly out</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="q2c2" name="question2" value="NEODYME:1,LANTHANE:1,DEATH_NO_SCARE_PATH" required>
                            <label for="q2c2">Death doesn't scare you. You know your time hasn't come and just go with the flow</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="q2c3" name="question2" value="DYSPROSIUM:1,GADOLINIUM:1,PRASEODYME:1,APERO_PATH" required>
                            <label for="q2c3">This is the end. No hope but still time to have fun and do one last apero</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="q2c4" name="question2" value="DYSPROSIUM:30,EXIT_ENDING" required>
                            <label for="q2c4">You look to your right and see the exit sign</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Next →
                        </button>
                    </div>
                </div>

                <!-- SPACESHIP PATH QUESTIONS -->
                <!-- Spaceship Question 1 - Destination Choice -->
                <div class="question-card" data-question="spaceship-1">
                    <h2 class="question-titre">Wow, your knowledge was really effective as you already have your spaceship ready. Where do you want to go ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qs1c1" name="spaceship1" value="PRASEODYME:1,TELLURE:1,MOON_PATH" required>
                            <label for="qs1c1">The moon, thinking you have a better catch phrase than "That's one small step for man, one giant leap for mankind."</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qs1c2" name="spaceship1" value="GADOLINIUM:1,NEODYME:1,EUROPA_PATH" required>
                            <label for="qs1c2">Go to Jupiter's moon Europa as we think there is lifeform over there</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- MOON PATH -->
                <!-- Moon Landing -->
                <div class="question-card" data-question="spaceship-moon">
                    <h2 class="question-titre">As you're putting on your astronaut suit to go walk on the moon, you're thinking of the catch phrase you're gonna say. What do you choose?</h2>
                    
                    <div class="question-image">
                        <img src="Q4 astronaute.png" alt="Astronaut putting on suit for moon landing" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qsm1" name="spaceship_moon" value="GADOLINIUM:1,PRASEODYME:1,LANTHANE:1,DYSPROSIUM:1" required>
                            <label for="qsm1">"Oooooooover the moon Baby!" - All for the camera!</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsm2" name="spaceship_moon" value="CERIUM:1, LANTHANE:1" required>
                            <label for="qsm2">You panic in front of the camera and just say "Look mum, I'm walking on the moon!" and start singing "Walking on the Moon" by The Police</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsm3" name="spaceship_moon" value="CERIUM:1,NEODYME:1,TELLURE:1" required>
                            <label for="qsm3">You prepare a scientifically accurate statement about lunar exploration</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsm4" name="spaceship_moon" value="LANTHANE:1," required>
                            <label for="qsm4">You forget about the catchphrase and just start doing moon bounces for fun</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- On the way back from the moon -->
                <div class="question-card" data-question="spaceship-return">
                    <h2 class="question-titre">On the way back to Earth, you've been hit by the tip of an asteroid. This doesn't look good... What is your reaction?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qsr1" name="spaceship_return" value="PRASEODYME:1" required>
                            <label for="qsr1">Try to calm the crew even though you have no idea how you will survive</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsr2" name="spaceship_return" value="DYSPROSIUM:1,TELLURE:1" required>
                            <label for="qsr2">Stay positive no matter what: "If you pay attention, all the spaceship beeping together make a great melody!"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsr3" name="spaceship_return" value="GADOLINIUM:1,LANTHANE:1" required>
                            <label for="qsr3">F*** this, we are all gonna diiieeeee!!!!</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsr4" name="spaceship_return" value="CERIUM:1,NEODYME:1" required>
                            <label for="qsr4">You don't handle stressful situations very well and simply faint</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- Landing on Earth -->
                <div class="question-card" data-question="spaceship-landing">
                    <h2 class="question-titre">Miraculously you manage to land on Earth! You arrive as heroes that saved all REEkind by deviating the asteroid trajectory. What is the first word you say when you land and talk to the first journalist?</h2>
                    
                    <div class="question-image">
                        <img src="Q6 earth.png" alt="Earth landing after space mission" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qsl1" name="spaceship_landing" value="LANTHANE:1,GADOLINIUM:1,DYSPROSIUM:1" required>
                            <label for="qsl1">"Man I'm hungry"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsl2" name="spaceship_landing" value="CERIUM:1,LANTHANE:1" required>
                            <label for="qsl2">"I think I need to change my pants"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsl3" name="spaceship_landing" value="GADOLINIUM:1,TELLURE:1" required>
                            <label for="qsl3">"It was craaaazy! I loved it!!"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsl4" name="spaceship_landing" value="NEODYME:1,PRASEODYME:1" required>
                            <label for="qsl4">"Yeaaaaah we saved your life, now where's my million !?!?!"</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- EUROPA PATH -->
                <!-- Europa Discovery -->
                <div class="question-card" data-question="spaceship-europa">
                    <h2 class="question-titre">As a true biologist, you want to explore what’s beneath the frosted crust. Who knows what you’ll find! You bet with your co-worker on what you think you will find.</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qse1" name="spaceship_europa" value="LANTHANE:1,CERIUM:1" required>
                            <label for="qse1">Microbes that emit fluorescence when speak</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qse2" name="spaceship_europa" value="DYSPROSIUM:1,TELLURE:1" required>
                            <label for="qse2">Many different plants with appearances ranging from shark-like to snail-like</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qse3" name="spaceship_europa" value="CERIUM:1,GADOLINIUM:1" required>
                            <label for="qse3">Jellyfish with bees stripes that eats sunlight and wear swimming glasses</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qse4" name="spaceship_europa" value="NEODYME:1,PRASEODYME:1" required>
                            <label for="qse4">Nothing truly living but wait… you discover that everything you live is part of the matrix </label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- DEATH NO SCARE PATH QUESTIONS -->
                <div class="question-card" data-question="death-1">
                    <h2 class="question-titre">Suddenly, a big magnet monster comes at you, he wants to bind with you. How do you react ?</h2>
                    
                    <div class="question-image">
                        <img src="Q3 magnet.png" alt="Big magnet monster approaching" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qd1c1" name="death1" value="GADOLINIUM:1,NEODYME:1,CERIUM:1,CRYING_OR_HUGS_PATH" required>
                            <label for="qd1c1">You see it coming closer and start crying thinking this might be your time after all</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qd1c2" name="death1" value="LANTHANE:1,TELLURE:1,PRASEODYME:1,COOKIE_PATH" required>
                            <label for="qd1c2">You don't care about it and focus on a big giant cookie in the middle of the trash that smells like your grandma's house. You go eat it.</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qd1c3" name="death1" value="GADOLINIUM:1,DYSPROSIUM:1,LANTHANE:1,CRYING_OR_HUGS_PATH" required>
                            <label for="qd1c3">You love hugs so you welcome it with open arms. It's cuddle o'clock.</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- CRYING OR HUGS PATH QUESTION -->
                <div class="question-card" data-question="death-crying-hugs">
                    <h2 class="question-titre">You forgot that you have a -10 myopia and you sat on your glasses... This is no monster but just your reflection in a mirror. What is your reflection ?</h2>
                    
                    <div class="question-image">
                        <img src="Q4 mirror.png" alt="Looking at reflection in a mirror" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qch1" name="crying_hugs" value="CERIUM:1,NEODYME:1" required>
                            <label for="qch1">I should eat more carrots... could be good for my eyes.</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qch2" name="crying_hugs" value="GADOLINIUM:1,LANTHANE:1,DYSPROSIUM:1,PRASEODYME:1,TELLURE:1" required>
                            <label for="qch2">Daam, I'm getting oooooold !</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qch3" name="crying_hugs" value="GADOLINIUM:1,DYSPROSIUM:1,TELLURE:1" required>
                            <label for="qch3">OMG, I have juicy lips ! Thank you mum's DNA</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qch4" name="crying_hugs" value="GADOLINIUM:1,NEODYME:1,CRY_MORE_PATH" required>
                            <label for="qch4">You cry even more</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- CRY MORE PATH QUESTION -->
                <div class="question-card" data-question="death-cry-more">
                    <h2 class="question-titre">Time to really get out of this trash, you need to get out of here ! What transport do you take ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qcm1" name="cry_more" value="CERIUM:1,DYSPROSIUM:1,TELLURE:1" required>
                            <label for="qcm1">Train</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcm2" name="cry_more" value="PRASEODYME:1,GADOLINIUM:1,TELLURE:1" required>
                            <label for="qcm2">Limousine</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcm3" name="cry_more" value="LANTHANE:1,DYSPROSIUM:1" required>
                            <label for="qcm3">Tandem</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcm4" name="cry_more" value="DYSPROSIUM:1,NEODYME:1,LANTHANE:1,TELLURE:1" required>
                            <label for="qcm4">On a T-rex back</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcm5" name="cry_more" value="GADOLINIUM:1,TELLURE:1,DYSPROSIUM:1,NEODYME:1,PRASEODYME:1,LANTHANE:1" required>
                            <label for="qcm5">Teleportation shoes</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- MIRROR REFLECTION PATH QUESTION -->
                <div class="question-card" data-question="death-mirror">
                    <h2 class="question-titre">You're so obsessed by your own reflection....</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qmr1" name="mirror_reflection" value="GADOLINIUM:1,LANTHANE:1,CERIUM:1,ALL_ALONE_PATH" required>
                            <label for="qmr1">You didn't see everybody leaving</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qmr2" name="mirror_reflection" value="GADOLINIUM:1,PRASEODYME:1,TELLURE:1,BEAUTIFUL_PATH" required>
                            <label for="qmr2">You're too damn beautiful that all your REEs friends start looking at your reflection</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qmr3" name="mirror_reflection" value="LANTHANE:1,NEODYME:1,GADOLINIUM:1,DYSPROSIUM:1,SAY_YES_PATH" required>
                            <label for="qmr3">You propose to yourself and say YEESSS !!!</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- COOKIE PATH QUESTION (for the cookie option from death-1) -->
                <div class="question-card" data-question="death-cookie">
                    <h2 class="question-titre">Too bad for you, you suddenly have a cramp... I guess it's time to say goodbye... What are your last words ?</h2>
                    
                    <div class="question-image">
                        <img src="Q4 cookie.png" alt="Cookie causing stomach cramp" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qck1" name="cookie_path" value="DYSPROSIUM:1" required>
                            <label for="qck1">"I have no regrets. This cookie was REElicious"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qck2" name="cookie_path" value="CERIUM:1:DYSPROSIUM:1,PRASEODYME:1,GADOLINIUM:1" required>
                            <label for="qck2">"Woman, I only had 1 life.... Goodbye recycling"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qck3" name="cookie_path" value="LANTHANE:1,GADOLINIUM:1,DYSPROSIUM:1" required>
                            <label for="qck3">"Man, why did I always skip sport at school"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qck4" name="cookie_path" value="TELLURE:1,NEODYME:1,GADOLINIUM:1,DYSPROSIUM:1" required>
                            <label for="qck4">"F*ck I'm gonna die a virgin"</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- STILL HUNGRY QUESTION (after cookie) -->
                <div class="question-card" data-question="death-still-hungry">
                    <h2 class="question-titre">Wait... you're still hungry! The cookie wasn't enough to satisfy your appetite. What do you do next?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qsh1" name="still_hungry" value="LANTHANE:1,DYSPROSIUM:1,NEODYME:1" required>
                            <label for="qsh1">Look for more cookies in the trash</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsh2" name="still_hungry" value="LANTHANE:1" required>
                            <label for="qsh2">Start eating anything that looks remotely edible</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsh3" name="still_hungry" value="CERIUM:1,PRASEODYME:1,GADOLINIUM:1" required>
                            <label for="qsh3">Try to find a proper kitchen to cook something</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsh4" name="still_hungry" value="TELLURE:1" required>
                            <label for="qsh4">Complain loudly that one cookie is never enough</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- COOKING CLASS QUESTION (final cookie path question) -->
                <div class="question-card" data-question="death-cooking-class">
                    <h2 class="question-titre">Suddenly, a cooking show host appears out of nowhere! They want to teach you how to make the perfect cookie. What's your reaction?</h2>
                    
                    <div class="question-image">
                        <img src="Q6 kitchen.png" alt="Cooking show host in kitchen" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qcc1" name="cooking_class" value="CERIUM:1" required>
                            <label for="qcc1">"Finally! I've been waiting for this moment my whole life!"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcc2" name="cooking_class" value="DYSPROSIUM:1" required>
                            <label for="qcc2">"Sure, but can we make it extra chocolatey?"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcc3" name="cooking_class" value="GADOLINIUM:1,PRASEODYME:1,NEODYME:1" required>
                            <label for="qcc3">"I don't need help, I'm already a cookie master"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qcc4" name="cooking_class" value="LANTHANE:1,TELLURE:1" required>
                            <label for="qcc4">"Can we just skip to the eating part?"</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- ALL ALONE PATH QUESTION -->
                <div class="question-card" data-question="death-all-alone">
                    <h2 class="question-titre">You finally get to be alone with your crush: YOU ! As any normal person would do, you start singing : "All by myyyyyyself" from Cerium Dion. Your savior love this song and comes rescue you from this waste. But who is this REE ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qaa1" name="all_alone" value="GADOLINIUM:1,DYSPROSIUM:1" required>
                            <label for="qaa1">pREEnce charming, he's got mad REEzz !</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qaa2" name="all_alone" value="NEODYME:1,LANTHANE:1,CERIUM:1,PRASEODYME:1" required>
                            <label for="qaa2">It's a witch... She will rescue you but want your honey voice in return. Darn it !</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qaa3" name="all_alone" value="GADOLINIUM:1,TELLURE:1,GADOLINIUM:1" required>
                            <label for="qaa3">Y'all heard of the famous Puss in Boots ? Meow, he's fluffy</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qaa4" name="all_alone" value="LANTHANE:1,NEODYME:1,PRASEODYME:1,CERIUM:1" required>
                            <label for="qaa4">It's your mum.</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- BEAUTIFUL PATH QUESTION -->
                <div class="question-card" data-question="death-beautiful">
                    <h2 class="question-titre">Your beauty has bewitched everybody. You take this opportunity to regroup everybody and work on your final escape plan. What is this great speech ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qbp1" name="beautiful" value="PRASEODYME:1,TELLURE:1,NEODYME:1,GADOLINIUM:1" required>
                            <label for="qbp1">"I have a dREEam..." (you know the rest)</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qbp2" name="beautiful" value="CERIUM:1,TELLURE:1,LANTHANE:1" required>
                            <label for="qbp2">"As Grandma says: 'AI can code but can it make soup ?'"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qbp3" name="beautiful" value="PRASEODYME:1,DYSPROSIUM:1,NEODYME:1" required>
                            <label for="qbp3">"Winter is coming, move your as* !"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qbp4" name="beautiful" value="NEODYME:1,TELLURE:1,CERIUM:1" required>
                            <label for="qbp4">"Expecto Patronum" HarREE Pot-Te-r was right, it works !</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- SAY YES PATH QUESTION -->
                <div class="question-card" data-question="death-say-yes">
                    <h2 class="question-titre">Tellurium Swift heard your response and start singing one of his main hits "Love stoREE". Everybody start to sing, it's so beautiful. Your savior love this song and comes rescue you. But who is this REE ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qsy1" name="say_yes" value="GADOLINIUM:1,DYSPROSIUM:1" required>
                            <label for="qsy1">pREEnce charming, he's got mad REEzz !</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsy2" name="say_yes" value="NEODYME:1,LANTHANE:1,CERIUM:1,PRASEODYME:1" required>
                            <label for="qsy2">It's a witch... She will rescue you but want your honey voice in return. Darn it !</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsy3" name="say_yes" value="GADOLINIUM:1,TELLURE:1,GADOLINIUM:1" required>
                            <label for="qsy3">Y'all heard of the famous Puss in Boots ? Meow, he's fluffy</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qsy4" name="say_yes" value="LANTHANE:1,NEODYME:1,PRASEODYME:1,CERIUM:1" required>
                            <label for="qsy4">It's your mum.</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- APERO PATH QUESTIONS -->
                <div class="question-card" data-question="apero-1">
                    <h2 class="question-titre">As it is probably your last apero, it must be PERFECT. Everybody participates and goes around to find the best ingredients. What do you choose to take care of ?</h2>
                    
                    <div class="question-image">
                        <img src="Q3 apéro.png" alt="Perfect apero setup with friends" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qa1c1" name="apero1" value="CERIUM:1,GADOLINIUM:1" required>
                            <label for="qa1c1">Vegetable sticks (with spices and all because you're fancy and healthy)</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qa1c2" name="apero1" value="LANTHANE:1" required>
                            <label for="qa1c2">Cheese and crackers</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qa1c3" name="apero1" value="DYSPROSIUM:1" required>
                            <label for="qa1c3">Hummus and other dips kind</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qa1c4" name="apero1" value="PRASEODYME:1" required>
                            <label for="qa1c4">Beef sticks</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qa1c5" name="apero1" value="TELLURE:1,LANTHANE:1" required>
                            <label for="qa1c5">You don't really cook but take care of the drinks ;)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- APERO MUSIC QUESTION -->
                <div class="question-card" data-question="apero-music">
                    <h2 class="question-titre">One mandatory thing is missing .... the music !!! What do you choose to play ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qam1" name="apero_music" value="GADOLINIUM:1,TELLURE:1" required>
                            <label for="qam1">Tellurium Swift</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qam2" name="apero_music" value="LANTHANE:1,NEODYME:1" required>
                            <label for="qam2">REEminem</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qam3" name="apero_music" value="GADOLINIUM:1,TELLURE:1" required>
                            <label for="qam3">REEyoncé AKA Queen REE</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qam4" name="apero_music" value="PRASEODYME:1,CERIUM:1" required>
                            <label for="qam4">The REElling stones</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- APERO GAME QUESTION -->
                <div class="question-card" data-question="apero-game">
                    <h2 class="question-titre">It looks like some are still a bit stressed from the whole trap for ever in the waste thing.... To light up the mood you propose to play a game. Which one ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qag1" name="apero_game" value="PRASEODYME:1,NEODYME:1" required>
                            <label for="qag1">Cards game like a little poker to make things more interesting</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qag2" name="apero_game" value="CERIUM:1,TELLURE:1" required>
                            <label for="qag2">A classic game of charades</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qag3" name="apero_game" value="CERIUM:1,DYSPROSIUM:1" required>
                            <label for="qag3">Trivial Pursuit so that you can flex your general cultural knowledge</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qag4" name="apero_game" value="LANTHANE:1,GADOLINIUM:1" required>
                            <label for="qag4">Truth or dare</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- POKER OR CHARADES OR TRIVIAL QUESTION -->
                <div class="question-card" data-question="apero-poker-charades">
                    <h2 class="question-titre">Someone gets too competitive and start yelling at you thinking that you're cheating. How do you react ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qpct1" name="poker_charades" value="PRASEODYME:1,DYSPROSIUM:1,CERIUM:1" required>
                            <label for="qpct1">You did actually cheat but choose to play denial : "Me, cheating ? I would never dare to !"</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qpct2" name="poker_charades" value="LANTHANE:1" required>
                            <label for="qpct2">You did cheat but don't like fighting so you admit everything and offer a big hug as a peace offering</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qpct3" name="poker_charades" value="GADOLINIUM:1,NEODYME:1,TELLURE:1,CERIUM:1" required>
                            <label for="qpct3">You would never cheat, you're just too talented</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qpct4" name="poker_charades" value="GADOLINIUM:1" required>
                            <label for="qpct4">You panic and start singing "under the sea" from the little mermaid</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- TRUTH OR DARE QUESTION -->
                <div class="question-card" data-question="apero-truth-dare">
                    <h2 class="question-titre">Someone dare you to walk on fire because this is what true leader does (the office ref)... Now are you a true leader ?</h2>
                    
                    <div class="question-image">
                        <img src="Q6 fire (truth or dare).png" alt="Walking on fire challenge from truth or dare" />
                    </div>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qtd1" name="truth_dare" value="PRASEODYME:1,NEODYME:1,GADOLINIUM:1,LANTHANE:1,YES_PATH" required>
                            <label for="qtd1">Yes</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qtd2" name="truth_dare" value="CERIUM:1,DYSPROSIUM:1,TELLURE:1,NO_TRUTH_PATH" required>
                            <label for="qtd2">No</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- YES - WALKED ON FIRE QUESTION -->
                <div class="question-card" data-question="apero-yes-fire">
                    <h2 class="question-titre">Daaaamm you crazy ! How is your foot ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qyf1" name="yes_fire" value="DYSPROSIUM:1,LANTHANE:1,GADOLINIUM:1,TELLURE:1" required>
                            <label for="qyf1">All good, you're super resistant to pain</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qyf2" name="yes_fire" value="CERIUM:1,NEODYME:1,PRASEODYME:1" required>
                            <label for="qyf2">You're crying, begging for ice and calling for your mama... (Normal reaction, just walked on fire)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- NO - TRUTH QUESTION -->
                <div class="question-card" data-question="apero-no-truth">
                    <h2 class="question-titre">You're not that crazy so you move to truth instead. What is your strongest fear ?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qnt1" name="no_truth" value="LANTHANE:1,TELLURE:1" required>
                            <label for="qnt1">Fear of snakes</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qnt2" name="no_truth" value="DYSPROSIUM:1,LANTHANE:1" required>
                            <label for="qnt2">Fear of foot</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qnt3" name="no_truth" value="CERIUM:1,GADOLINIUM:1,NEODYME:1" required>
                            <label for="qnt3">Fear of chemistry</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qnt4" name="no_truth" value="DYSPROSIUM:1,PRASEODYME:1,GADOLINIUM:1,NEODYME:1" required>
                            <label for="qnt4">Fear of missing out (FOMO)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- TELLURIUM SWIFT QUESTION (after yes-fire or no-truth) -->
                <div class="question-card" data-question="apero-tellurium-swift">
                    <h2 class="question-titre">After this chaotic scene, the team's mood drop and allows you to hear a music across the e-waste. As you are approaching it you realize that it's a concert from no-one else but the star Tellurium Swift !!!</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qts1" name="tellurium_swift" value="GADOLINIUM:1" required>
                            <label for="qts1">You go full crazy fan mode and try to pass security to hug your idole</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qts2" name="tellurium_swift" value="DYSPROSIUM:1,TELLURIUM:1,PRASEODYME:1" required>
                            <label for="qts2">You let out your goofiness and start dancing like no-one is looking at you</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qts3" name="tellurium_swift" value="CERIUM:1" required>
                            <label for="qts3">You're an introvert so just moving your legs a bit is quite an effort</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qts4" name="tellurium_swift" value="LANTHANE:1,NEODYME:1" required>
                            <label for="qts4">You're not a fan and put your earpods on to listen to REEminem.</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- GETTING OUT ON MONGOLFIÈRE QUESTION (plasmid riddle) -->
                <div class="question-card" data-question="apero-mongolfiere">
                    <h2 class="question-titre">At the end of the concert, Tellurium Swift offers you and your teams to escape on its hot-air balloon but you must first answer a riddle.<br><br>"I'm small and circular, outside the main thread,<br>Carry resistance and tricks that microbes can spread.<br>I don't code for life, but life uses me still—<br>Horizontal transfer? I fit that bill."<br><br><strong>What am I?</strong></h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qm1" name="mongolfiere" value="CERIUM:1,LANTHANE:1,DNA_WRONG" required>
                            <label for="qm1">DNA</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qm2" name="mongolfiere" value="GADOLINIUM:1,DYSPROSIUM:1,WEDDING_WRONG" required>
                            <label for="qm2">A wedding ring</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qm3" name="mongolfiere" value="CERIUM:1,TELLURIUM:1,PRASEODYME:1,PLASMID_CORRECT" required>
                            <label for="qm3">A plasmid</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qm4" name="mongolfiere" value="NEODYME:1,DYSPROSIUM:1,EUROPA_WRONG" required>
                            <label for="qm4">Europa (Jupiter's moon)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- DNA WRONG ANSWER -->
                <div class="question-card" data-question="apero-dna-wrong">
                    <h2 class="question-titre">Wrong DNA code for life, Duh<br><br>Try again :<br>"I'm small and circular, outside the main thread,<br>Carry resistance and tricks that microbes can spread.<br>I don't code for life, but life uses me still—<br>Horizontal transfer? I fit that bill."<br><br><strong>What am I?</strong></h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qdn1" name="dna_wrong" value="CERIUM:1,LANTHANE:1,DNA_WRONG" required>
                            <label for="qdn1">DNA</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qdn2" name="dna_wrong" value="GADOLINIUM:1,DYSPROSIUM:1,WEDDING_WRONG" required>
                            <label for="qdn2">A wedding ring</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qdn3" name="dna_wrong" value="CERIUM:1,TELLURIUM:1,PRASEODYME:1,PLASMID_CORRECT" required>
                            <label for="qdn3">A plasmid</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qdn4" name="dna_wrong" value="NEODYME:1,DYSPROSIUM:1,EUROPA_WRONG" required>
                            <label for="qdn4">Europa (Jupiter's moon)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- WEDDING RING WRONG ANSWER -->
                <div class="question-card" data-question="apero-wedding-wrong">
                    <h2 class="question-titre">Could have been right...<br>Is indeed small and circular,<br>Carry resistance against people that would like to approach you in a bar,<br>Horizontal transfer during the ring exchange....<br>But please, remember that this is a biology project<br><br>Try again :<br>"I'm small and circular, outside the main thread,<br>Carry resistance and tricks that microbes can spread.<br>I don't code for life, but life uses me still—<br>Horizontal transfer? I fit that bill."<br><br><strong>What am I?</strong></h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qwr1" name="wedding_wrong" value="CERIUM:1,LANTHANE:1,DNA_WRONG" required>
                            <label for="qwr1">DNA</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qwr2" name="wedding_wrong" value="GADOLINIUM:1,DYSPROSIUM:1,WEDDING_WRONG" required>
                            <label for="qwr2">A wedding ring</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qwr3" name="wedding_wrong" value="CERIUM:1,TELLURIUM:1,PRASEODYME:1,PLASMID_CORRECT" required>
                            <label for="qwr3">A plasmid</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qwr4" name="wedding_wrong" value="NEODYME:1,DYSPROSIUM:1,EUROPA_WRONG" required>
                            <label for="qwr4">Europa (Jupiter's moon)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- EUROPA WRONG ANSWER -->
                <div class="question-card" data-question="apero-europa-wrong">
                    <h2 class="question-titre">Could have been right as well...<br>Indeed, it is small and circular compare to the giant Jupiter,<br>We do believe that some sort of microbes can spread and uses this moon to live on...<br>But still wrong answer.<br><br>Try again:<br>"I'm small and circular, outside the main thread,<br>Carry resistance and tricks that microbes can spread.<br>I don't code for life, but life uses me still—<br>Horizontal transfer? I fit that bill."<br><br><strong>What am I?</strong></h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qer1" name="europa_wrong" value="CERIUM:1,LANTHANE:1,DNA_WRONG" required>
                            <label for="qer1">DNA</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qer2" name="europa_wrong" value="GADOLINIUM:1,DYSPROSIUM:1,WEDDING_WRONG" required>
                            <label for="qer2">A wedding ring</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qer3" name="europa_wrong" value="CERIUM:1,TELLURIUM:1,PRASEODYME:1,PLASMID_CORRECT" required>
                            <label for="qer3">A plasmid</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qer4" name="europa_wrong" value="NEODYME:1,DYSPROSIUM:1,EUROPA_WRONG" required>
                            <label for="qer4">Europa (Jupiter's moon)</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- PLASMID CORRECT ANSWER -->
                <div class="question-card" data-question="apero-plasmid-correct">
                    <h2 class="question-titre">Yaaaay, right answer ! You did listen in your biology class !<br>You can now escape and enjoy the view :)</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qpc1" name="plasmid_correct" value="LANTHANE:1,TELLURE:1" required>
                            <label for="qpc1">Enjoy the beautiful view from the hot-air balloon</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qpc2" name="plasmid_correct" value="GADOLINIUM:1,PRASEODYME:1" required>
                            <label for="qpc2">Take selfies with Tellurium Swift</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qpc3" name="plasmid_correct" value="CERIUM:1" required>
                            <label for="qpc3">Ask Tellurium Swift about the science behind plasmids</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qpc4" name="plasmid_correct" value="DYSPROSIUM:1,NEODYME:1" required>
                            <label for="qpc4">Plan your next adventure once you land</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-suivant" onclick="questionSuivante()">
                            Continue →
                        </button>
                    </div>
                </div>

                <!-- FINAL SHARED CARD -->
                <div class="question-card" data-question="final-card">
                    <h2 class="question-titre">As your adventure comes to an end, what lesson will you take away from this experience?</h2>
                    
                    <div class="choix-container">
                        <div class="choix">
                            <input type="radio" id="qfc1" name="final_card" value="CERIUM:1,PRASEODYME:1" required>
                            <label for="qfc1">The importance of being prepared and following proper procedures</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qfc2" name="final_card" value="DYSPROSIUM:1,LANTHANE:1" required>
                            <label for="qfc2">Sometimes the best adventures come from taking bold risks</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qfc3" name="final_card" value="PRASEODYME:1,TELLURE:1" required>
                            <label for="qfc3">Every experience teaches us something valuable about ourselves</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qfc4" name="final_card" value="GADOLINIUM:1,NEODYME:1" required>
                            <label for="qfc4">Confidence and determination can take you anywhere</label>
                        </div>
                        <div class="choix">
                            <input type="radio" id="qfc5" name="final_card" value="LANTHANE:1,DYSPROSIUM:1,GADOLINIUM:1" required>
                            <label for="qfc5">Connecting with others makes any journey more meaningful</label>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button type="button" class="btn-precedent" onclick="questionPrecedente()">
                            ← Back
                        </button>
                        <button type="button" class="btn-resultat" onclick="submitQuiz()">
                            Discover my result ! 🎉
                        </button>
                    </div>
                </div>
            </form>
        </section>

        <!-- REEVOLUTIONATE PROJECT MESSAGE -->
        <div id="reevolutionate-message" class="resultat-container">
            <div class="carte-resultat">
                <h2>🎉 You've escaped ! 🎉</h2>
                <div class="resultat-contenu">
                    <h3 style="color: #71aca2; margin-bottom: 20px;">CONGRATS ! you did it! You're not trash anymore... what a REElief!</h3>
                    <p style="text-align: left; line-height: 1.6;">
                        You've been officially <strong>REEcycled</strong>, thanks to your saviors: the brilliant students of Lausanne behind the <strong>REEvolutionaTe</strong> project.<br><br>
                        They used bacteria to do all the dirty work so you could live on forever.<br>
                        Curious how they pulled that off? Go take a peek behind the scenes: <em>[Wiki link]</em><br><br>
                        You're welcome ;)
                    </p>
                    <div class="actions-resultat">
                        <button onclick="showREEResult(getCharacterResult())" class="btn-partager">Click here to see which REE you are</button>
                        <button onclick="recommencer()" class="btn-recommencer">Restart the quiz</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- RÉSULTAT -->
        <div id="resultat" class="resultat-container">
            <div class="carte-resultat">
                <h2>🎉 You escaped! 🎉</h2>
                <div class="resultat-contenu">
                    <h3 style="color: #71aca2; margin-bottom: 20px;">CONGRATS ! you did it! You're not trash anymore... what a REElief!</h3>
                    <p style="text-align: left; line-height: 1.4;">
                        You've been officially REEcycled, thanks to your saviors: the brilliant students of Lausanne behind the <strong>REEvolutionaTe</strong> project.<br><br>
                        They used bacteria to do all the dirty work so you could live on forever.<br>
                        Curious how they pulled that off? Go take a peek behind the scenes: <em>[Wiki link]</em><br><br>
                        You're welcome ;)
                    </p>
                    <h3 id="resultat-titre" style="margin-top: 25px;"></h3>
                    <p id="resultat-description"></p>
                    <div class="actions-resultat">
                        <button onclick="recommencer()" class="btn-recommencer">Redo the quiz</button>
                        <button onclick="partager()" class="btn-partager">Share my result</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SPECIAL EXIT ENDING -->
        <div id="exit-ending" class="resultat-container">
            <div class="carte-resultat">
                <h2>🎉 You escaped! 🎉</h2>
                <div class="resultat-contenu">
                    <div id="exit-image-container" style="text-align: center; margin-bottom: 20px;"></div>
                    <h3 style="color: #71aca2; margin-bottom: 20px;">CONGRATS ! you did it! You're not trash anymore... what a REElief!</h3>
                    <p style="text-align: left; line-height: 1.4;">
                        You've been officially REEcycled, thanks to your saviors: the brilliant students of Lausanne behind the <strong>REEvolutionaTe</strong> project.<br><br>
                        They used bacteria to do all the dirty work so you could live on forever.<br>
                        Curious how they pulled that off? Go take a peek behind the scenes: <em>[Wiki link]</em><br><br>
                        You're welcome ;)
                    </p>
                    <div class="actions-resultat">
                        <button onclick="recommencer()" class="btn-recommencer">Restart the adventure</button>
                        <button onclick="showREEResult(getCharacterResult())" class="btn-partager">Click here to see which REE you are</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Character Image for REE result -->
        <div id="pdf-container" class="resultat-container" style="display:none;">
            <div class="carte-resultat">
                <h2>🎉 Your REE Character! 🎉</h2>
                <div class="resultat-contenu" style="text-align: center;">
                    <img id="character-image" src="" alt="Your REE Character" style="max-width: 100%; height: auto; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <br>
                    <button onclick="recommencer()" class="btn-recommencer">Restart the quiz</button>
                </div>
            </div>
        </div>    <script>
        // Variables globales
        let questionActuelle = 1;
        const totalQuestions = 5;
        let currentPath = ''; // Track which path the user is on

        function commencerQuiz() {
            document.getElementById('accueil').style.display = 'none';
            document.getElementById('quiz').style.display = 'block';
            mettreAJourProgress();
        }

        function questionSuivante() {
            // Vérifier qu'une réponse est sélectionnée
            const questionCourante = document.querySelector('.question-card.active');
            const reponseSelectionnee = questionCourante.querySelector('input[type="radio"]:checked');
            
            if (!reponseSelectionnee) {
                alert('Please select an answer before continuing.');
                return;
            }

            // Vérifier si c'est la fin spéciale "EXIT_ENDING"
            if (reponseSelectionnee.value.includes('EXIT_ENDING')) {
                afficherFinSpeciale();
                return;
            }

            // Masquer la question actuelle
            questionCourante.classList.remove('active');

            // Vérifier les chemins spéciaux de la question 2
            if (questionActuelle === 2) {
                if (reponseSelectionnee.value.includes('SPACESHIP_PATH')) {
                    // Aller vers le chemin spaceship
                    currentPath = 'spaceship';
                    const spaceshipQuestion = document.querySelector('[data-question="spaceship-1"]');
                    if (spaceshipQuestion) {
                        spaceshipQuestion.classList.add('active');
                        questionActuelle = 'spaceship-1';
                        mettreAJourProgress();
                    }
                    return;
                } else if (reponseSelectionnee.value.includes('DEATH_NO_SCARE_PATH')) {
                    // Aller vers le chemin death no scare
                    currentPath = 'death';
                    const deathQuestion = document.querySelector('[data-question="death-1"]');
                    if (deathQuestion) {
                        deathQuestion.classList.add('active');
                        questionActuelle = 'death-1';
                        mettreAJourProgress();
                    }
                    return;
                } else if (reponseSelectionnee.value.includes('APERO_PATH')) {
                    // Aller vers le chemin apero
                    currentPath = 'apero';
                    const aperoQuestion = document.querySelector('[data-question="apero-1"]');
                    if (aperoQuestion) {
                        aperoQuestion.classList.add('active');
                        questionActuelle = 'apero-1';
                        mettreAJourProgress();
                    }
                    return;
                }
            }

            // Navigation pour les chemins Spaceship
            if (questionActuelle === 'spaceship-1') {
                if (reponseSelectionnee.value.includes('MOON_PATH')) {
                    currentPath = 'spaceship-moon';
                    const moonQuestion = document.querySelector('[data-question="spaceship-moon"]');
                    if (moonQuestion) {
                        moonQuestion.classList.add('active');
                        questionActuelle = 'spaceship-moon';
                        mettreAJourProgress();
                    }
                    return;
                } else if (reponseSelectionnee.value.includes('EUROPA_PATH')) {
                    currentPath = 'spaceship-europa';
                    const europaQuestion = document.querySelector('[data-question="spaceship-europa"]');
                    if (europaQuestion) {
                        europaQuestion.classList.add('active');
                        questionActuelle = 'spaceship-europa';
                        mettreAJourProgress();
                    }
                    return;
                }
            }

            // Navigation pour les questions du chemin Moon
            if (questionActuelle === 'spaceship-moon') {
                const returnQuestion = document.querySelector('[data-question="spaceship-return"]');
                if (returnQuestion) {
                    returnQuestion.classList.add('active');
                    questionActuelle = 'spaceship-return';
                    mettreAJourProgress();
                }
                return;
            }

            // Navigation pour les questions du chemin Europa vers le retour
            if (questionActuelle === 'spaceship-europa') {
                const returnQuestion = document.querySelector('[data-question="spaceship-return"]');
                if (returnQuestion) {
                    returnQuestion.classList.add('active');
                    questionActuelle = 'spaceship-return';
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'spaceship-return') {
                const landingQuestion = document.querySelector('[data-question="spaceship-landing"]');
                if (landingQuestion) {
                    landingQuestion.classList.add('active');
                    questionActuelle = 'spaceship-landing';
                    mettreAJourProgress();
                }
                return;
            }

            // Navigation pour les chemins Death path
            if (questionActuelle === 'death-1') {
                if (reponseSelectionnee.value.includes('CRYING_OR_HUGS_PATH')) {
                    currentPath = 'death-crying-hugs';
                    const cryingHugsQuestion = document.querySelector('[data-question="death-crying-hugs"]');
                    if (cryingHugsQuestion) {
                        cryingHugsQuestion.classList.add('active');
                        questionActuelle = 'death-crying-hugs';
                        mettreAJourProgress();
                    }
                    return;
                } else if (reponseSelectionnee.value.includes('COOKIE_PATH')) {
                    currentPath = 'death-cookie';
                    const cookieQuestion = document.querySelector('[data-question="death-cookie"]');
                    if (cookieQuestion) {
                        cookieQuestion.classList.add('active');
                        questionActuelle = 'death-cookie';
                        mettreAJourProgress();
                    }
                    return;
                }
            }

            if (questionActuelle === 'death-crying-hugs') {
                if (reponseSelectionnee.value.includes('CRY_MORE_PATH')) {
                    currentPath = 'death-cry-more';
                    const cryMoreQuestion = document.querySelector('[data-question="death-cry-more"]');
                    if (cryMoreQuestion) {
                        cryMoreQuestion.classList.add('active');
                        questionActuelle = 'death-cry-more';
                        mettreAJourProgress();
                    }
                    return;
                } else {
                    currentPath = 'death-mirror';
                    const mirrorQuestion = document.querySelector('[data-question="death-mirror"]');
                    if (mirrorQuestion) {
                        mirrorQuestion.classList.add('active');
                        questionActuelle = 'death-mirror';
                        mettreAJourProgress();
                    }
                    return;
                }
            }

            // Navigation for mirror reflection sub-paths
            if (questionActuelle === 'death-mirror') {
                if (reponseSelectionnee.value.includes('ALL_ALONE_PATH')) {
                    currentPath = 'death-all-alone';
                    const allAloneQuestion = document.querySelector('[data-question="death-all-alone"]');
                    if (allAloneQuestion) {
                        allAloneQuestion.classList.add('active');
                        questionActuelle = 'death-all-alone';
                        mettreAJourProgress();
                    }
                    return;
                } else if (reponseSelectionnee.value.includes('BEAUTIFUL_PATH')) {
                    currentPath = 'death-beautiful';
                    const beautifulQuestion = document.querySelector('[data-question="death-beautiful"]');
                    if (beautifulQuestion) {
                        beautifulQuestion.classList.add('active');
                        questionActuelle = 'death-beautiful';
                        mettreAJourProgress();
                    }
                    return;
                } else if (reponseSelectionnee.value.includes('SAY_YES_PATH')) {
                    currentPath = 'death-say-yes';
                    const sayYesQuestion = document.querySelector('[data-question="death-say-yes"]');
                    if (sayYesQuestion) {
                        sayYesQuestion.classList.add('active');
                        questionActuelle = 'death-say-yes';
                        mettreAJourProgress();
                    }
                    return;
                }
            }

            // Navigation for cookie path continuation
            if (questionActuelle === 'death-cookie') {
                const stillHungryQuestion = document.querySelector('[data-question="death-still-hungry"]');
                if (stillHungryQuestion) {
                    stillHungryQuestion.classList.add('active');
                    questionActuelle = 'death-still-hungry';
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'death-still-hungry') {
                const cookingClassQuestion = document.querySelector('[data-question="death-cooking-class"]');
                if (cookingClassQuestion) {
                    cookingClassQuestion.classList.add('active');
                    questionActuelle = 'death-cooking-class';
                    mettreAJourProgress();
                }
                return;
            }

            // Navigation for apero path
            if (questionActuelle === 'apero-1') {
                const musicQuestion = document.querySelector('[data-question="apero-music"]');
                if (musicQuestion) {
                    musicQuestion.classList.add('active');
                    questionActuelle = 'apero-music';
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'apero-music') {
                const gameQuestion = document.querySelector('[data-question="apero-game"]');
                if (gameQuestion) {
                    gameQuestion.classList.add('active');
                    questionActuelle = 'apero-game';
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'apero-game') {
                if (reponseSelectionnee.value.includes('LANTHANE:1,GADOLINIUM:1')) {
                    // Truth or dare was selected
                    const truthDareQuestion = document.querySelector('[data-question="apero-truth-dare"]');
                    if (truthDareQuestion) {
                        truthDareQuestion.classList.add('active');
                        questionActuelle = 'apero-truth-dare';
                        mettreAJourProgress();
                    }
                } else {
                    // Any other game (poker, charades, trivial) was selected
                    const pokerCharadesQuestion = document.querySelector('[data-question="apero-poker-charades"]');
                    if (pokerCharadesQuestion) {
                        pokerCharadesQuestion.classList.add('active');
                        questionActuelle = 'apero-poker-charades';
                        mettreAJourProgress();
                    }
                }
                return;
            }

            // Navigation for truth or dare sub-paths
            if (questionActuelle === 'apero-truth-dare') {
                if (reponseSelectionnee.value.includes('YES_PATH')) {
                    const yesFireQuestion = document.querySelector('[data-question="apero-yes-fire"]');
                    if (yesFireQuestion) {
                        yesFireQuestion.classList.add('active');
                        questionActuelle = 'apero-yes-fire';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('NO_TRUTH_PATH')) {
                    const noTruthQuestion = document.querySelector('[data-question="apero-no-truth"]');
                    if (noTruthQuestion) {
                        noTruthQuestion.classList.add('active');
                        questionActuelle = 'apero-no-truth';
                        mettreAJourProgress();
                    }
                }
                return;
            }

            // Navigation from apero-poker-charades, apero-yes-fire, and apero-no-truth to tellurium-swift
            if (questionActuelle === 'apero-poker-charades' || questionActuelle === 'apero-yes-fire' || questionActuelle === 'apero-no-truth') {
                const telluriumSwiftQuestion = document.querySelector('[data-question="apero-tellurium-swift"]');
                if (telluriumSwiftQuestion) {
                    telluriumSwiftQuestion.classList.add('active');
                    questionActuelle = 'apero-tellurium-swift';
                    mettreAJourProgress();
                }
                return;
            }

            // Navigation from tellurium-swift to mongolfiere
            if (questionActuelle === 'apero-tellurium-swift') {
                const mongolfiereQuestion = document.querySelector('[data-question="apero-mongolfiere"]');
                if (mongolfiereQuestion) {
                    mongolfiereQuestion.classList.add('active');
                    questionActuelle = 'apero-mongolfiere';
                    mettreAJourProgress();
                }
                return;
            }

            // Navigation from mongolfiere riddle based on answer
            if (questionActuelle === 'apero-mongolfiere') {
                if (reponseSelectionnee.value.includes('DNA_WRONG')) {
                    const dnaWrongQuestion = document.querySelector('[data-question="apero-dna-wrong"]');
                    if (dnaWrongQuestion) {
                        dnaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-dna-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('WEDDING_WRONG')) {
                    const weddingWrongQuestion = document.querySelector('[data-question="apero-wedding-wrong"]');
                    if (weddingWrongQuestion) {
                        weddingWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-wedding-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('EUROPA_WRONG')) {
                    const europaWrongQuestion = document.querySelector('[data-question="apero-europa-wrong"]');
                    if (europaWrongQuestion) {
                        europaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-europa-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('PLASMID_CORRECT')) {
                    const plasmidCorrectQuestion = document.querySelector('[data-question="apero-plasmid-correct"]');
                    if (plasmidCorrectQuestion) {
                        plasmidCorrectQuestion.classList.add('active');
                        questionActuelle = 'apero-plasmid-correct';
                        mettreAJourProgress();
                    }
                }
                return;
            }

            // Navigation from wrong answer questions - they all route based on the new answer
            if (questionActuelle === 'apero-dna-wrong') {
                if (reponseSelectionnee.value.includes('DNA_WRONG')) {
                    // Stay on same question - DNA wrong again
                    const dnaWrongQuestion = document.querySelector('[data-question="apero-dna-wrong"]');
                    if (dnaWrongQuestion) {
                        dnaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-dna-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('WEDDING_WRONG')) {
                    const weddingWrongQuestion = document.querySelector('[data-question="apero-wedding-wrong"]');
                    if (weddingWrongQuestion) {
                        weddingWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-wedding-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('EUROPA_WRONG')) {
                    const europaWrongQuestion = document.querySelector('[data-question="apero-europa-wrong"]');
                    if (europaWrongQuestion) {
                        europaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-europa-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('PLASMID_CORRECT')) {
                    const plasmidCorrectQuestion = document.querySelector('[data-question="apero-plasmid-correct"]');
                    if (plasmidCorrectQuestion) {
                        plasmidCorrectQuestion.classList.add('active');
                        questionActuelle = 'apero-plasmid-correct';
                        mettreAJourProgress();
                    }
                }
                return;
            }

            if (questionActuelle === 'apero-wedding-wrong') {
                if (reponseSelectionnee.value.includes('DNA_WRONG')) {
                    const dnaWrongQuestion = document.querySelector('[data-question="apero-dna-wrong"]');
                    if (dnaWrongQuestion) {
                        dnaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-dna-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('WEDDING_WRONG')) {
                    // Stay on same question - wedding ring wrong again
                    const weddingWrongQuestion = document.querySelector('[data-question="apero-wedding-wrong"]');
                    if (weddingWrongQuestion) {
                        weddingWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-wedding-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('EUROPA_WRONG')) {
                    const europaWrongQuestion = document.querySelector('[data-question="apero-europa-wrong"]');
                    if (europaWrongQuestion) {
                        europaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-europa-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('PLASMID_CORRECT')) {
                    const plasmidCorrectQuestion = document.querySelector('[data-question="apero-plasmid-correct"]');
                    if (plasmidCorrectQuestion) {
                        plasmidCorrectQuestion.classList.add('active');
                        questionActuelle = 'apero-plasmid-correct';
                        mettreAJourProgress();
                    }
                }
                return;
            }

            if (questionActuelle === 'apero-europa-wrong') {
                if (reponseSelectionnee.value.includes('DNA_WRONG')) {
                    const dnaWrongQuestion = document.querySelector('[data-question="apero-dna-wrong"]');
                    if (dnaWrongQuestion) {
                        dnaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-dna-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('WEDDING_WRONG')) {
                    const weddingWrongQuestion = document.querySelector('[data-question="apero-wedding-wrong"]');
                    if (weddingWrongQuestion) {
                        weddingWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-wedding-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('EUROPA_WRONG')) {
                    // Stay on same question - Europa wrong again
                    const europaWrongQuestion = document.querySelector('[data-question="apero-europa-wrong"]');
                    if (europaWrongQuestion) {
                        europaWrongQuestion.classList.add('active');
                        questionActuelle = 'apero-europa-wrong';
                        mettreAJourProgress();
                    }
                } else if (reponseSelectionnee.value.includes('PLASMID_CORRECT')) {
                    const plasmidCorrectQuestion = document.querySelector('[data-question="apero-plasmid-correct"]');
                    if (plasmidCorrectQuestion) {
                        plasmidCorrectQuestion.classList.add('active');
                        questionActuelle = 'apero-plasmid-correct';
                        mettreAJourProgress();
                    }
                }
                return;
            }

            // Navigation vers la carte finale pour tous les chemins
            if (questionActuelle === 'spaceship-landing' || 
                questionActuelle === 'death-cooking-class' || questionActuelle === 'death-cry-more' || 
                questionActuelle === 'death-all-alone' || questionActuelle === 'death-beautiful' || 
                questionActuelle === 'death-say-yes' || questionActuelle === 'apero-plasmid-correct') {
                const finalCard = document.querySelector('[data-question="final-card"]');
                if (finalCard) {
                    finalCard.classList.add('active');
                    questionActuelle = 'final-card';
                    mettreAJourProgress();
                }
                return;
            }

            // Navigation normale pour les autres questions
            if (typeof questionActuelle === 'number') {
                questionActuelle++;
                const prochaineQuestion = document.querySelector(`[data-question="${questionActuelle}"]`);
                if (prochaineQuestion) {
                    prochaineQuestion.classList.add('active');
                    mettreAJourProgress();
                }
            }
        }

        function questionPrecedente() {
            // Masquer la question actuelle
            const questionCourante = document.querySelector('.question-card.active');
            questionCourante.classList.remove('active');
            
            // Gérer le retour depuis les chemins spéciaux vers la question 2
            if (questionActuelle === 'spaceship-1' || questionActuelle === 'death-1' || questionActuelle === 'apero-1') {
                questionActuelle = 2;
                const question2 = document.querySelector('[data-question="2"]');
                if (question2) {
                    question2.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Retour depuis les sous-questions du chemin Spaceship
            if (questionActuelle === 'spaceship-moon' || questionActuelle === 'spaceship-europa') {
                questionActuelle = 'spaceship-1';
                const spaceshipQuestion = document.querySelector('[data-question="spaceship-1"]');
                if (spaceshipQuestion) {
                    spaceshipQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'spaceship-return') {
                // Go back to either moon or europa based on the current path
                if (currentPath === 'spaceship-europa') {
                    questionActuelle = 'spaceship-europa';
                    const europaQuestion = document.querySelector('[data-question="spaceship-europa"]');
                    if (europaQuestion) {
                        europaQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else {
                    // Default to moon path
                    questionActuelle = 'spaceship-moon';
                    const moonQuestion = document.querySelector('[data-question="spaceship-moon"]');
                    if (moonQuestion) {
                        moonQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                }
                return;
            }

            if (questionActuelle === 'spaceship-landing') {
                questionActuelle = 'spaceship-return';
                const returnQuestion = document.querySelector('[data-question="spaceship-return"]');
                if (returnQuestion) {
                    returnQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Retour depuis les sous-questions du chemin Death
            if (questionActuelle === 'death-crying-hugs' || questionActuelle === 'death-cookie') {
                questionActuelle = 'death-1';
                const deathQuestion = document.querySelector('[data-question="death-1"]');
                if (deathQuestion) {
                    deathQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Retour pour les nouvelles questions du chemin cookie
            if (questionActuelle === 'death-still-hungry') {
                questionActuelle = 'death-cookie';
                const cookieQuestion = document.querySelector('[data-question="death-cookie"]');
                if (cookieQuestion) {
                    cookieQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'death-cooking-class') {
                questionActuelle = 'death-still-hungry';
                const stillHungryQuestion = document.querySelector('[data-question="death-still-hungry"]');
                if (stillHungryQuestion) {
                    stillHungryQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'death-cry-more' || questionActuelle === 'death-mirror') {
                questionActuelle = 'death-crying-hugs';
                const cryingHugsQuestion = document.querySelector('[data-question="death-crying-hugs"]');
                if (cryingHugsQuestion) {
                    cryingHugsQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Retour depuis les sous-questions du chemin Mirror reflection
            if (questionActuelle === 'death-all-alone' || questionActuelle === 'death-beautiful' || questionActuelle === 'death-say-yes') {
                questionActuelle = 'death-mirror';
                const mirrorQuestion = document.querySelector('[data-question="death-mirror"]');
                if (mirrorQuestion) {
                    mirrorQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Backward navigation for apero path
            if (questionActuelle === 'apero-music') {
                questionActuelle = 'apero-1';
                const aperoQuestion = document.querySelector('[data-question="apero-1"]');
                if (aperoQuestion) {
                    aperoQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'apero-game') {
                questionActuelle = 'apero-music';
                const musicQuestion = document.querySelector('[data-question="apero-music"]');
                if (musicQuestion) {
                    musicQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Backward navigation for new apero sub-questions
            if (questionActuelle === 'apero-poker-charades' || questionActuelle === 'apero-truth-dare') {
                questionActuelle = 'apero-game';
                const gameQuestion = document.querySelector('[data-question="apero-game"]');
                if (gameQuestion) {
                    gameQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            if (questionActuelle === 'apero-yes-fire' || questionActuelle === 'apero-no-truth') {
                questionActuelle = 'apero-truth-dare';
                const truthDareQuestion = document.querySelector('[data-question="apero-truth-dare"]');
                if (truthDareQuestion) {
                    truthDareQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Backward navigation for new tellurium swift question
            if (questionActuelle === 'apero-tellurium-swift') {
                // This can come from multiple sources, need to check the last question
                // For now, default to apero-poker-charades (could be improved with tracking)
                questionActuelle = 'apero-poker-charades';
                const pokerCharadesQuestion = document.querySelector('[data-question="apero-poker-charades"]');
                if (pokerCharadesQuestion) {
                    pokerCharadesQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Backward navigation for mongolfiere riddle
            if (questionActuelle === 'apero-mongolfiere') {
                questionActuelle = 'apero-tellurium-swift';
                const telluriumSwiftQuestion = document.querySelector('[data-question="apero-tellurium-swift"]');
                if (telluriumSwiftQuestion) {
                    telluriumSwiftQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Backward navigation for wrong answer questions - they all go back to mongolfiere
            if (questionActuelle === 'apero-dna-wrong' || questionActuelle === 'apero-wedding-wrong' || questionActuelle === 'apero-europa-wrong') {
                questionActuelle = 'apero-mongolfiere';
                const mongolfiereQuestion = document.querySelector('[data-question="apero-mongolfiere"]');
                if (mongolfiereQuestion) {
                    mongolfiereQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Backward navigation for correct plasmid answer
            if (questionActuelle === 'apero-plasmid-correct') {
                questionActuelle = 'apero-mongolfiere';
                const mongolfiereQuestion = document.querySelector('[data-question="apero-mongolfiere"]');
                if (mongolfiereQuestion) {
                    mongolfiereQuestion.classList.add('active');
                    mettreAJourProgress();
                }
                return;
            }

            // Retour depuis la carte finale vers les dernières questions de chaque chemin
            if (questionActuelle === 'final-card') {
                // Use the tracked path to go back to the correct question
                if (currentPath === 'spaceship-moon' || currentPath === 'spaceship-europa') {
                    questionActuelle = 'spaceship-landing';
                    const landingQuestion = document.querySelector('[data-question="spaceship-landing"]');
                    if (landingQuestion) {
                        landingQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'death-crying-hugs') {
                    questionActuelle = 'death-crying-hugs';
                    const cryingHugsQuestion = document.querySelector('[data-question="death-crying-hugs"]');
                    if (cryingHugsQuestion) {
                        cryingHugsQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'death-cookie') {
                    questionActuelle = 'death-cooking-class';
                    const cookingClassQuestion = document.querySelector('[data-question="death-cooking-class"]');
                    if (cookingClassQuestion) {
                        cookingClassQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'death-cry-more') {
                    questionActuelle = 'death-cry-more';
                    const cryMoreQuestion = document.querySelector('[data-question="death-cry-more"]');
                    if (cryMoreQuestion) {
                        cryMoreQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'death-all-alone') {
                    questionActuelle = 'death-all-alone';
                    const allAloneQuestion = document.querySelector('[data-question="death-all-alone"]');
                    if (allAloneQuestion) {
                        allAloneQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'death-beautiful') {
                    questionActuelle = 'death-beautiful';
                    const beautifulQuestion = document.querySelector('[data-question="death-beautiful"]');
                    if (beautifulQuestion) {
                        beautifulQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'death-say-yes') {
                    questionActuelle = 'death-say-yes';
                    const sayYesQuestion = document.querySelector('[data-question="death-say-yes"]');
                    if (sayYesQuestion) {
                        sayYesQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                } else if (currentPath === 'apero') {
                    // For apero path, go back to the plasmid correct question since that's the only path to final
                    questionActuelle = 'apero-plasmid-correct';
                    const plasmidCorrectQuestion = document.querySelector('[data-question="apero-plasmid-correct"]');
                    if (plasmidCorrectQuestion) {
                        plasmidCorrectQuestion.classList.add('active');
                        mettreAJourProgress();
                    }
                }
                return;
            }
            
            // Navigation normale pour les questions numérotées
            if (typeof questionActuelle === 'number') {
                questionActuelle--;
                const questionPrecedente = document.querySelector(`[data-question="${questionActuelle}"]`);
                if (questionPrecedente) {
                    questionPrecedente.classList.add('active');
                    mettreAJourProgress();
                }
            }
        }

        function mettreAJourProgress() {
            const progressBar = document.getElementById('progress');
            const questionActuelleSpan = document.getElementById('question-actuelle');
            
            let pourcentage, questionNum;
            
            // Gérer les chemins spéciaux avec progression plus réaliste
            if (questionActuelle === 'spaceship-1' || questionActuelle === 'death-1' || questionActuelle === 'apero-1') {
                questionNum = 3;
                pourcentage = 50;
            } else if (questionActuelle === 'spaceship-moon' || questionActuelle === 'spaceship-europa' || 
                       questionActuelle === 'death-crying-hugs' || questionActuelle === 'death-cookie' ||
                       questionActuelle === 'apero-music') {
                questionNum = 4;
                pourcentage = 66;
            } else if (questionActuelle === 'spaceship-return' || 
                       questionActuelle === 'death-cry-more' || questionActuelle === 'death-mirror' ||
                       questionActuelle === 'death-still-hungry' || questionActuelle === 'apero-game') {
                questionNum = 5;
                pourcentage = 83;
            } else if (questionActuelle === 'spaceship-landing' || questionActuelle === 'spaceship-europa' ||
                       questionActuelle === 'death-all-alone' || questionActuelle === 'death-beautiful' ||
                       questionActuelle === 'death-say-yes' || questionActuelle === 'death-cooking-class' ||
                       questionActuelle === 'apero-poker-charades' || questionActuelle === 'apero-truth-dare') {
                questionNum = 6;
                pourcentage = 100;
            } else if (questionActuelle === 'apero-yes-fire' || questionActuelle === 'apero-no-truth') {
                questionNum = 7;
                pourcentage = 100;
            } else if (questionActuelle === 'apero-tellurium-swift') {
                questionNum = 8;
                pourcentage = 100;
            } else if (questionActuelle === 'apero-mongolfiere' || questionActuelle === 'apero-dna-wrong' || 
                       questionActuelle === 'apero-wedding-wrong' || questionActuelle === 'apero-europa-wrong') {
                questionNum = 9;
                pourcentage = 100;
            } else if (questionActuelle === 'apero-plasmid-correct' || questionActuelle === 'final-card') {
                questionNum = 10;
                pourcentage = 100;
            } else {
                // Pour les questions numérotées (1, 2)
                questionNum = questionActuelle;
                pourcentage = (questionActuelle / 6) * 100;
            }
            
            progressBar.style.width = pourcentage + '%';
            questionActuelleSpan.textContent = questionNum;
        }

        // Gérer la soumission du formulaire
        document.getElementById('quiz-form').addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Form submitted!'); // Debug log
            
            // Vérifier que la dernière question a une réponse
            const questionCourante = document.querySelector('.question-card.active');
            console.log('Current question:', questionCourante ? questionCourante.getAttribute('data-question') : 'None'); // Debug log
            const reponseSelectionnee = questionCourante.querySelector('input[type="radio"]:checked');
            
            if (!reponseSelectionnee) {
                alert('Please answer the last question.');
                return;
            }

            console.log('Selected answer:', reponseSelectionnee.value); // Debug log

            // Calculer le résultat
            const formData = new FormData(this);
            const scores = {
                'CERIUM': 0,
                'DYSPROSIUM': 0,
                'PRASEODYME': 0,
                'LANTHANE': 0,
                'GADOLINIUM': 0,
                'NEODYME': 0,
                'TELLURE': 0
            };

            // Compter les points
            for (let [name, value] of formData.entries()) {
                console.log('Processing:', name, '=', value); // Debug log
                // Ignorer les valeurs de chemin spéciales
                if (value.includes('_PATH') || value === 'EXIT_ENDING') {
                    continue;
                }
                
                // Nouveau système de scoring pour toutes les questions
                // Format: "TYPE:POINTS,TYPE:POINTS" ou "TYPE:POINTS"
                const entries = value.split(',');
                
                for (let entry of entries) {
                    const [type, points] = entry.split(':');
                    if (type && points && scores.hasOwnProperty(type)) {
                        scores[type] += parseInt(points);
                    }
                }
            }

            console.log('Final scores:', scores); // Debug log

            // Trouver le type gagnant
            let typeGagnant = 'CERIUM';
            let scoreMax = 0;
            for (let type in scores) {
                if (scores[type] > scoreMax) {
                    scoreMax = scores[type];
                    typeGagnant = type;
                }
            }

            console.log('Winner:', typeGagnant); // Debug log
            
            // Store the winner for later display
            window.quizResult = typeGagnant;
            
            // Show REEvolutionaTe message first
            document.getElementById('reevolutionate-message').style.display = 'flex';
        });

        function submitQuiz() {
            console.log('Submit quiz function called!'); // Debug log
            
            // Vérifier que la dernière question a une réponse
            const questionCourante = document.querySelector('.question-card.active');
            console.log('Current question:', questionCourante ? questionCourante.getAttribute('data-question') : 'None'); // Debug log
            const reponseSelectionnee = questionCourante.querySelector('input[type="radio"]:checked');
            
            if (!reponseSelectionnee) {
                alert('Please answer the last question.');
                return;
            }

            console.log('Selected answer:', reponseSelectionnee.value); // Debug log

            // Calculer le résultat
            const formData = new FormData(document.getElementById('quiz-form'));
            const scores = {
                'CERIUM': 0,
                'DYSPROSIUM': 0,
                'PRASEODYME': 0,
                'LANTHANE': 0,
                'GADOLINIUM': 0,
                'NEODYME': 0,
                'TELLURE': 0
            };

            // Compter les points
            for (let [name, value] of formData.entries()) {
                console.log('Processing:', name, '=', value); // Debug log
                // Ignorer les valeurs de chemin spéciales
                if (value.includes('_PATH') || value === 'EXIT_ENDING') {
                    continue;
                }
                
                // Nouveau système de scoring pour toutes les questions
                // Format: "TYPE:POINTS,TYPE:POINTS" ou "TYPE:POINTS"
                const entries = value.split(',');
                
                for (let entry of entries) {
                    const [type, points] = entry.split(':');
                    if (type && points && scores.hasOwnProperty(type)) {
                        scores[type] += parseInt(points);
                    }
                }
            }

            console.log('Final scores:', scores); // Debug log

            // Trouver le type gagnant
            let typeGagnant = 'CERIUM';
            let scoreMax = 0;
            for (let type in scores) {
                if (scores[type] > scoreMax) {
                    scoreMax = scores[type];
                    typeGagnant = type;
                }
            }

            console.log('Winner:', typeGagnant); // Debug log
            
            // Store the winner for later display
            window.quizResult = typeGagnant;
            
            // Show REEvolutionaTe message first
            document.getElementById('reevolutionate-message').style.display = 'flex';
        }

        function afficherResultat(type) {
            const resultats = {
                'CERIUM': {
                    titre: 'The Exploratory Cerium 🔍',
                    description: 'Like Cerium, you are versatile and adaptable! You excel at discovering new applications and know how to adapt to different situations. Your natural curiosity drives you to explore new territories.',
                    couleur: '#f96628'
                },
                'DYSPROSIUM': {
                    titre: 'The Dysfunctional Dysprosium 🏄‍♂️',
                    description: 'Like Dysprosium, you put the fun in dysfunctional! You\'re crazy, ruthless but brilliant. You know how to have fun even when your house is burning down. Hidden talent: you\'re incredible at crocheting!',
                    couleur: '#71aca2'
                },
                'PRASEODYME': {
                    titre: 'The Presidential Praseodymium 👑',
                    description: 'Like Praseodymium, you\'re the leader who organizes the best parties! You\'re photogenic, you give beautiful speeches, but you\'re authoritarian and have zero luck. Hidden talent: you know all Taylor Swift songs by heart!',
                    couleur: '#fda968'
                },
                'LANTHANE': {
                    titre: 'The Goofy Lanthanum 😴',
                    description: 'Like Lanthanum, you are very laid-back and the kindest! You\'re a bit slow but incredibly chill. You can sleep anywhere and give the best hugs. Hidden talent: you can burp the alphabet backwards!',
                    couleur: '#ac6b9d'
                },
                'GADOLINIUM': {
                    titre: 'The Glamorous Gadolinium ✨',
                    description: 'Like Gadolinium, you have the perfect outfit for every situation! You\'re magnificent, extroverted and you write poetry. You\'re broke but a hopeless romantic. Hidden talent: you can drink through your nose!',
                    couleur: '#8bc34a'
                },
                'NEODYME': {
                    titre: 'The Conspiracy Theorist Neodymium 😎',
                    description: 'Like Neodymium, you don\'t trust anything or anyone! You wear weird glasses, you always argue with Cerium and you think everything is a conspiracy. Hidden talent: you turn your shopping list into a manifesto!',
                    couleur: '#2196f3'
                },
                'TELLURE': {
                    titre: 'The Lone Wolf Tellurium 🐺',
                    description: 'Like Tellurium, you are unique and mysterious! You love alone time, you don\'t talk much except to say completely crazy things. You\'re a private detective and you wear a leather jacket. Pick-up line: "Want to see my shed?"',
                    couleur: '#ff5722'
                }
            };

            const resultat = resultats[type];
            
            // Split the title to separate emoji from text
            const titleParts = resultat.titre.match(/^(.+?)\s([🔍🏄‍♂️👑😴✨😎🐺])$/);
            if (titleParts) {
                // If emoji is found, display it separately from colored text
                document.getElementById('resultat-titre').innerHTML = `<span style="color: ${resultat.couleur};">${titleParts[1]}</span> ${titleParts[2]}`;
            } else {
                // Fallback: display as before
                document.getElementById('resultat-titre').textContent = resultat.titre;
                document.getElementById('resultat-titre').style.color = resultat.couleur;
            }
            
            document.getElementById('resultat-description').textContent = resultat.description;

            document.getElementById('resultat').style.display = 'flex';
            
            // Ajouter des confettis
            creerConfettis();
        }

        function showREEResult(character) {
            // Hide all result containers
            document.getElementById('reevolutionate-message').style.display = 'none';
            document.getElementById('resultat').style.display = 'none';
            document.getElementById('exit-ending').style.display = 'none';
            
            // Show the character image container
            document.getElementById('pdf-container').style.display = 'block';
            
            // Set the image file based on the character (format: [Character].png)
            var imageFile = character + '.png';
            document.getElementById('character-image').src = imageFile;
        }

        function partager() {
            const titre = document.getElementById('resultat-titre').textContent;
            const texte = `I just did the personality quiz and I am ${titre}! What about you, what type are you?`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'My result to the Personality Quiz',
                    text: texte,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(texte + ' ' + window.location.href).then(() => {
                    alert('Result copied to clipboard!');
                });
            }
        }

        function creerConfettis() {
            const couleurs = ['#f96628', '#71aca2', '#fda968', '#ac6b9d', '#8bc34a', '#2196f3', '#ff5722'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.cssText = `
                        position: fixed;
                        width: 10px;
                        height: 10px;
                        background: ${couleurs[Math.floor(Math.random() * couleurs.length)]};
                        top: -10px;
                        left: ${Math.random() * 100}%;
                        z-index: 1001;
                        pointer-events: none;
                        animation: fall 3s linear forwards;
                    `;
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.parentNode.removeChild(confetti);
                        }
                    }, 3000);
                }, i * 100);
            }
        }

        // Fonctions pour la fin spéciale
        function afficherFinSpeciale() {
            // Add the exit image
            const imageContainer = document.getElementById('exit-image-container');
            imageContainer.innerHTML = '<img src="Q2 Exit.png" alt="Exit scene" class="question-image" style="max-width: 60%; height: auto; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">';
            
            document.getElementById('exit-ending').style.display = 'flex';
            creerConfettis();
        }

        function continueToPersonalityQuiz() {
            // For the EXIT path, automatically assign DYSPROSIUM as the personality result
            const typeGagnant = 'DYSPROSIUM';

            // Masquer la fin spéciale et afficher le résultat REE
            document.getElementById('exit-ending').style.display = 'none';
            
            // Show the PDF directly for DYSPROSIUM
            showREEResult('Dysprosium');
        }

        // Get the character result based on the quiz answers
        function getCharacterResult() {
            // If there's a stored quiz result, use it
            if (window.quizResult) {
                // Convert from uppercase to title case for image file names
                const elementMap = {
                    'CERIUM': 'Cerium',
                    'DYSPROSIUM': 'Dysprosium',
                    'PRASEODYME': 'Praseodyme',
                    'LANTHANE': 'Lanthane',
                    'GADOLINIUM': 'Gadolinium',
                    'NEODYME': 'Neodyme',
                    'TELLURE': 'Tellure'
                };
                return elementMap[window.quizResult] || 'Cerium';
            }
            
            // Calculate result based on current answers
            const scores = {
                'CERIUM': 0,
                'DYSPROSIUM': 0,
                'PRASEODYME': 0,
                'LANTHANE': 0,
                'GADOLINIUM': 0,
                'NEODYME': 0,
                'TELLURE': 0
            };

            // Go through all selected answers and count scores
            const selectedAnswers = document.querySelectorAll('input[type="radio"]:checked');
            selectedAnswers.forEach(answer => {
                const value = answer.value;
                const parts = value.split(',');
                parts.forEach(part => {
                    if (part.includes(':')) {
                        const [element, points] = part.split(':');
                        if (scores.hasOwnProperty(element)) {
                            scores[element] += parseInt(points);
                        }
                    }
                });
            });

            // Find the element with the highest score
            let maxScore = 0;
            let winningElement = 'CERIUM'; // default
            
            for (const [element, score] of Object.entries(scores)) {
                if (score > maxScore) {
                    maxScore = score;
                    winningElement = element;
                }
            }

            // Convert to title case for image file names
            const elementMap = {
                'CERIUM': 'Cerium',
                'DYSPROSIUM': 'Dysprosium',
                'PRASEODYME': 'Praseodyme',
                'LANTHANE': 'Lanthane',
                'GADOLINIUM': 'Gadolinium',
                'NEODYME': 'Neodyme',
                'TELLURE': 'Tellure'
            };

            return elementMap[winningElement] || 'Cerium';
        }

        // Mettre à jour la fonction recommencer pour gérer aussi la fin spéciale
        function recommencer() {
            // Réinitialiser
            questionActuelle = 1;
            currentPath = ''; // Reset path tracking
            
            // Réinitialiser le formulaire
            document.getElementById('quiz-form').reset();
            
            // Réinitialiser les questions (y compris les chemins spéciaux)
            document.querySelectorAll('.question-card').forEach((q) => {
                q.classList.remove('active');
            });
            
            // Activer seulement la première question
            const firstQuestion = document.querySelector('[data-question="1"]');
            if (firstQuestion) {
                firstQuestion.classList.add('active');
            }
            
            // Masquer tous les résultats et afficher l'accueil
            document.getElementById('resultat').style.display = 'none';
            document.getElementById('reevolutionate-message').style.display = 'none';
            document.getElementById('exit-ending').style.display = 'none';
            document.getElementById('pdf-container').style.display = 'none';
            document.getElementById('quiz').style.display = 'none';
            document.getElementById('accueil').style.display = 'block';
        }
    </script>
</body>
</html>
